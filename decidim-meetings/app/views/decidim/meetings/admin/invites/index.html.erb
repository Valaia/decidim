<div class="card">
  <div class="card-divider">
    <h2 class="card-title">
      <%= title %> - <%= t(".invites") %>
      <%= link_to t(".invite_attendee"), meeting.registrations_enabled ? new_meeting_registrations_invite_path(meeting) : "#", class: "button tiny button--title #{'disabled' unless allowed_to? :invite_attendee, :meeting, meeting: meeting}" %>
    </h2>
  </div>

  <div class="card-section">
    <div class="table-scroll">
      <table class="table-list">
        <thead>
          <tr>
            <th><%= t("models.invite.fields.name", scope: "decidim.meetings") %></th>
            <th><%= t("models.invite.fields.email", scope: "decidim.meetings") %></th>
            <th><%= t("models.invite.fields.sent_at", scope: "decidim.meetings") %></th>
            <th><%= t("models.invite.fields.status", scope: "decidim.meetings") %></th>
          </tr>
        </thead>
        <tbody>
          <% @invites.each do |invite| %>
            <% presenter = Decidim::Meetings::InvitePresenter.new(invite) %>
            <tr data-id="<%= invite.id %>">
              <td>
                <%= invite.user.name %>
              </td>
              <td>
                <%= invite.user.email %>
              </td>
              <td>
                <% if invite.sent_at %>
                  <%= l invite.sent_at, format: :long %>
                <% end %>
              </td>
              <td class="<%= presenter.status_html_class %>">
                <%= presenter.status %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <%= paginate @invites, theme: "decidim" %>
    </div>
  </div>
</div>
